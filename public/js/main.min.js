function setRestaurantFavorite(e,t,a){let r=e;r.is_favorite=!a,r.restaurant_id&&delete r.restaurant_id,r.lat&&delete r.lat,r.lng&&delete r.lng,r.reviews&&delete r.reviews,r.updatedAt=Math.floor(new Date/1e3),DBHelper.addUpdateRestaurantById(r,(a,i)=>{if(a)throw a.message=`Request failed. Returned status of ${a.message}`,a;t.className="favorite "+(r.is_favorite?"is-favorite":"not-favorite"),t.title=r.is_favorite?"is favorite":"is not favorite",t.onclick=(a=>{setRestaurantFavorite(e,t,r.is_favorite)});const s=document.createElement("i");s.className="far fa-heart",t.innerHTML="",t.append(s)})}lazyLoadImages=(()=>{let e=[].slice.call(document.querySelectorAll("img.lazy"));if("IntersectionObserver"in window){let t=new IntersectionObserver(function(e,a){e.forEach(function(e){if(e.isIntersecting){let a=e.target;a.src=a.dataset.src,a.srcset=a.dataset.srcset,a.classList.remove("lazy"),t.unobserve(a)}})});e.forEach(function(e){t.observe(e)})}}),createFavoriteHTML=(e=>{if(!e)return!1;let t=!(!e||!e.is_favorite||"true"!==e.is_favorite.toString());const a=document.createElement("a");a.className="favorite "+(t?"is-favorite":"not-favorite"),a.title=t?"is favorite":"is not favorite",a.onclick=(r=>{setRestaurantFavorite(e,a,t)});const r=document.createElement("i");return r.className="far fa-heart",a.append(r),a.setAttribute("role","button"),a.setAttribute("tabindex","0"),a.setAttribute("aria-pressed","false"),a.setAttribute("aria-label","Toggle favorite for "+e.name),a}),navigator.serviceWorker&&navigator.serviceWorker.register("sw.js").then(function(){}).catch(function(){});